{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export function renderMarkup(arr) {\n  return arr\n    .map(item => {\n      return `\n           <li class=\"gallery-item\">\n          <a href=\"${item.largeImageURL}\">\n          <div class=\"image-container\">\n            <img src=\"${item.webformatURL}\" alt=\"${item.tags}\" width=\"360\" height=\"200\"> </div>\n            <ul class=\"photo-dsc\">\n               <li > \n                <p class=\"photo-dsc-title\">Likes</p>\n                <p class=\"photo-dsc-text\">${item.likes}</p>\n              </li>\n               <li > \n                <p class=\"photo-dsc-title\">Views</p>\n                <p class=\"photo-dsc-text\">${item.views}</p>\n              </li>\n               <li > \n                <p class=\"photo-dsc-title\">Comments</p>\n                <p class=\"photo-dsc-text\">${item.comments}</p>\n              </li>\n               <li > \n                <p class=\"photo-dsc-title\">Downloads</p>\n                <p class=\"photo-dsc-text\">${item.downloads}</p>\n              </li>\n            </ul>\n          </a>\n        </li>\n      `;\n    })\n    .join('');\n}\n","import Axios from 'axios';\n\nconst axios = Axios.create({\n  baseURL: 'https://pixabay.com/api/',\n});\n\nexport async function getImages(q, page, per_page) {\n  const res = await axios.get('', {\n    params: {\n      key: '44962724-2fcdbdaf7fb299db2b6841432',\n      q,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      page,\n      per_page,\n    },\n  });\n  return res.data;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { renderMarkup } from './js/render-functions';\nimport { getImages } from './js/pixabay-api';\n\nlet page = 1;\nlet per_page = 15;\nlet userValue = '';\nlet totalPages = 1;\n\nexport const refs = {\n  formSearchEl: document.querySelector('.form-search'),\n  galleryListEl: document.querySelector('.gallery-list'),\n  loader: document.querySelector('.loader'),\n  loadMoreBtnEl: document.querySelector('.btn-load-more'),\n};\n\nrefs.formSearchEl.addEventListener('submit', onFormSearch);\nrefs.loadMoreBtnEl.addEventListener('click', onLoadMoreBtn);\n\nasync function onFormSearch(e) {\n  e.preventDefault();\n\n  userValue = refs.formSearchEl.elements.search.value.trim();\n\n  if (!userValue) return;\n\n  page = 1;\n  refs.galleryListEl.innerHTML = '';\n  hideBtnLoadMore();\n\n  try {\n    showLoader();\n    const data = await getImages(userValue, page, per_page);\n    if (data.hits.length === 0) {\n      showErrorNoImageMessage();\n    } else {\n      totalPages = Math.ceil(data.totalHits / per_page);\n      refs.galleryListEl.innerHTML = renderMarkup(data.hits);\n      gallery.refresh();\n      if (data.totalHits > per_page) showBtnLoadMore();\n    }\n  } catch (error) {\n    showErrorMessage(error);\n  }\n\n  hideLoader();\n  refs.formSearchEl.elements.search.value = '';\n}\n\nasync function onLoadMoreBtn() {\n  page += 1;\n\n  try {\n    showLoader();\n    if (page === totalPages) {\n      showInfoMessage();\n      hideBtnLoadMore();\n    }\n    const data = await getImages(userValue, page, per_page);\n    const markup = renderMarkup(data.hits);\n    refs.galleryListEl.insertAdjacentHTML('beforeend', markup);\n    gallery.refresh();\n    scrollWindow();\n  } catch (error) {\n    showErrorMessage(error);\n  }\n  hideLoader();\n}\n\nfunction showErrorNoImageMessage() {\n  return iziToast.error({\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n    backgroundColor: '#ef4040',\n    messageColor: '#fafafb',\n    position: 'topRight',\n    progressBarColor: '#fafafb',\n  });\n}\n\nfunction showErrorMessage(error) {\n  return iziToast.error({\n    message: `Error: ${error.message}`,\n    backgroundColor: '#ef4040',\n    messageColor: '#fafafb',\n    position: 'topRight',\n    progressBarColor: '#fafafb',\n  });\n}\n\nfunction showInfoMessage() {\n  return iziToast.info({\n    message: \"We're sorry, but you've reached the end of search results.\",\n    backgroundColor: '#0099FF',\n    messageColor: '#fafafb',\n    position: 'topRight',\n    progressBarColor: '#fafafb',\n  });\n}\n\nfunction showLoader() {\n  refs.loader.classList.remove('loader-hidden');\n}\n\nfunction hideLoader() {\n  refs.loader.classList.add('loader-hidden');\n}\n\nfunction showBtnLoadMore() {\n  refs.loadMoreBtnEl.classList.remove('hidden');\n}\n\nfunction hideBtnLoadMore() {\n  refs.loadMoreBtnEl.classList.add('hidden');\n}\n\nfunction scrollWindow() {\n  const galleryItemEl = document.querySelector('.gallery-item');\n  const galleryItemHeight = galleryItemEl.getBoundingClientRect().height;\n  window.scrollBy({\n    top: galleryItemHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nconst gallery = new SimpleLightbox('.gallery-list a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n"],"names":["renderMarkup","arr","item","axios","Axios","getImages","q","page","per_page","userValue","totalPages","refs","onFormSearch","onLoadMoreBtn","e","hideBtnLoadMore","showLoader","data","showErrorNoImageMessage","gallery","showBtnLoadMore","error","showErrorMessage","hideLoader","showInfoMessage","markup","scrollWindow","iziToast","galleryItemHeight","SimpleLightbox"],"mappings":"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"}